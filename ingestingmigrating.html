<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ingesting/Migrating - Next Generation Digital Repository Solution</title><meta name="description" content="During ingests/migrations there are several items that have been covered by different sections of this document. It helps to have a working knowledge of linked&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://donrichards.github.io/migrate_islandora_csv/ingestingmigrating.html"><link rel="amphtml" href="https://donrichards.github.io/migrate_islandora_csv/amp/ingestingmigrating.html"><link rel="alternate" type="application/atom+xml" href="https://donrichards.github.io/migrate_islandora_csv/feed.xml"><link rel="alternate" type="application/json" href="https://donrichards.github.io/migrate_islandora_csv/feed.json"><meta property="og:title" content="Ingesting/Migrating"><meta property="og:site_name" content="Next Generation Digital Repository Solution"><meta property="og:description" content="During ingests/migrations there are several items that have been covered by different sections of this document. It helps to have a working knowledge of linked&hellip;"><meta property="og:url" content="https://donrichards.github.io/migrate_islandora_csv/ingestingmigrating.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://donrichards.github.io/migrate_islandora_csv/media/website/add.ico" type="image/x-icon"><link rel="stylesheet" href="https://donrichards.github.io/migrate_islandora_csv/assets/css/style.css?v=16a64c46666bea60947fd47410df672e"><link rel="stylesheet" href="https://donrichards.github.io/migrate_islandora_csv/assets/css/prism-default.css?v=9744853d64d710edcae61a3d59a17ee2"><link rel="stylesheet" href="https://donrichards.github.io/migrate_islandora_csv/assets/css/docsearch.css?v=0407a7a131feaf753e76cd9d86149dc2"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://donrichards.github.io/migrate_islandora_csv/ingestingmigrating.html"},"headline":"Ingesting/Migrating","datePublished":"2020-06-29T13:18","dateModified":"2020-07-09T15:17","description":"During ingests/migrations there are several items that have been covered by different sections of this document. It helps to have a working knowledge of linked&hellip;","author":{"@type":"Person","name":"Don Richards"},"publisher":{"@type":"Organization","name":"Don Richards"}}</script></head><body><header class="header" id="js-header"><a class="logo" href="https://donrichards.github.io/migrate_islandora_csv/">Next Generation Digital Repository Solution </a><a href="https://github.com/donrichards/migrate_islandora_csv/" class="btn btn--outline btn--icon github" aria-label="Github" title="Github"><svg height="22" width="22"><use xlink:href="https://donrichards.github.io/migrate_islandora_csv/assets/svg/svg-map.svg#github"></use></svg> Github</a></header><main><div class="container container--with-sidebar"><div class="sidebar js-sidebar"><form action="https://donrichards.github.io/migrate_islandora_csv/search.html" class="sidebar__search"><input type="search" placeholder="search..." aria-label="Search" id="docsearch-input" class="js-search"></form><nav class="sidebar__menu"><ul class="js-sidebar-menu"><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/islandora-8-overview.html">Islandora</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/islandora-8-overview.html">Overview</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/background.html">Background</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/community-and-sustainability.html">Community &amp; Sustainability</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/vendors.html">Vendors</a></li></ul></li><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/content-modeling.html">Content Modeling</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/content-modeling.html">Content Model Overview</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/general-content-models.html">General Content Modeling</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/pcdm.html">PCDM</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/images-books-and-pages.html">Images, Books, and Pages</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/other-content-types.html">Other Objects</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/book-and-large-image-viewer.html">Books &amp; Large Image Viewer</a></li></ul></li><li class="active-parent has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/uploading-ingesting-and-migration.html">Uploading, Ingesting, and Migration</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/uploading-ingesting-and-migration.html">Overview</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/uploading.html">Uploading</a></li><li class="active"><a href="https://donrichards.github.io/migrate_islandora_csv/ingestingmigrating.html">Ingesting &amp; Migrating</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/developer-debugging.html">Developer Debugging</a></li></ul></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/preservation.html">Preservation</a></li><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/metadata-and-metadata-sharing.html">Metadata and Metadata Sharing</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/mods-to-rdf.html">MODS to RDF Mapping</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/oai-pmh-and-doi-minting.html">OAI-PMH &amp; DOI Minting</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/bibliography-and-citation.html">Bibliography &amp; Citation</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/rights-and-restrictions.html">Rights &amp; Restrictions</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/next-level-discoverability-solutions.html">Next Level Discoverability Solutions</a></li></ul></li><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/technical-infrastructure.html">Technical Infrastructure</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/technical-infrastructure.html">Technical Infrastructure</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/how-to-access-specific-data.html">How to access specific data</a></li></ul></li><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/deployment-options.html">Deployment Options</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/cloud-hosting-solution.html">Cloud Hosting</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/cas-authentication.html">CAS</a></li></ul></li><li class="has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/institutional-repository.html">Institutional Repository</a><ul><li><a href="https://donrichards.github.io/migrate_islandora_csv/bibliography-and-citation.html">Bibliography &amp; Citation</a></li><li><a href="https://donrichards.github.io/migrate_islandora_csv/step-by-step-setup-ir.html">Step by Step Setup (IR)</a></li></ul></li><li class="red has-submenu"><a href="https://donrichards.github.io/migrate_islandora_csv/quick-document-design-key.html">PDF&#x27;s Quick Reference Material Locations</a><ul><li class="red"><a href="https://donrichards.github.io/migrate_islandora_csv/developer-debugging.html">Developer Debugging</a></li></ul></li></ul></nav></div><div class="content content--center"><article class="post"><h1>Ingesting/Migrating</h1><div class="post__entry"><p>During ingests/migrations there are several items that have been covered by different sections of this document. It helps to have a working knowledge of linked data, RDF, and ontology &amp; vocabulary basics vs repository-specific ontologies to create a comprehensive migration/ingest. Names, files, metadata along with the DOI is important to have a firm understanding of how this information is related to process it correctly.</p><h2 id="batch-processingmigrating">Batch Processing/Migrating</h2><p><a href="https://islandora.github.io/documentation/technical-documentation/migrate-csv/#ingesting-files">Ingesting Files</a> according to the documentation the Migrate API is the main way to ingest batches of data into Drupal (and because Islandora 8 is Drupal, into Islandora). The Migrate module only provides the framework, it’s up to you to create the rules that take data from a source, through a process (i.e. a mapping) to a destination. A set of these rules is called a “migration”. It has to be set up (as a Configuration Entity, either by importing a YAML file or by installing a Feature) and then it has to be ran.</p><p>In a nutshell the steps are the following:</p><ol><li>Create a CSV file.</li><li>Create a yml for each type of entity (person, place, event, university, etc) needing to mint.</li><li>Create a “file” yml configuration file for the files.</li><li>Create a “media” yml configuration file for the files to specify their media behavior once in Drupal.</li><li>Create a “node” yml configuration file for gluing the file and media to a node. It the Islandora 7 terminology this would be the “object”.</li></ol><p></p><figure class="post__image"><img loading="lazy" src="https://user-images.githubusercontent.com/2738244/86034395-88738c00-ba08-11ea-8aaa-48bea9d0cc97.png" data-is-external-image="true" alt="Screenshot of Migrate UI"></figure><p></p><p>Althought this process can be done in the admin UI, it’s highly suggested to use drush commands. The UI doesn’t respect order of operations and very little information is given from the admin UI when there is an error.</p><p></p><figure class="post__image"><img loading="lazy" src="https://user-images.githubusercontent.com/2738244/87075911-0bf26180-c1ef-11ea-91ed-f6e7cfca0140.png" data-is-external-image="true" alt="migrate status in the terminal"></figure><p></p><p></p><figure class="post__image"><img loading="lazy" src="https://user-images.githubusercontent.com/2738244/87076752-2b3dbe80-c1f0-11ea-9db3-974dda17b4f4.png" data-is-external-image="true" alt="Terminal results from collection import"></figure><p></p><h2 id="important-notes">Important Notes</h2><h3 id="dates">Dates</h3><p>It’s highly recomended to convert dates to EDTF. EDTF field type is for recording dates in Extended Date Time Format, which is a format based off of the hyphenated form of ISO 8601 (e.g. 1991-02-03 or 1991-02-03T10:00:00), but also allows expressions of different granularity and uncertainty.</p><p></p><figure class="post__image"><img loading="lazy" src="https://islandora.github.io/documentation/assets/metadata_edtf_valid.png" data-is-external-image="true" alt="Metadata edtf valid form"></figure><p></p><p>This doesn’t have to be done on the original metadata (MODS), it can be done in the transform process of the migration. The configuration for the Default EDTF Widget (including options for extra strict date validation, and allowing date intervals and date sets).</p><p></p><figure class="post__image"><img loading="lazy" src="https://islandora.github.io/documentation/assets/metadata_edtf_formatters.png" data-is-external-image="true" alt="EDTF formatter settings"></figure><p></p><h3 id="getting-metadata-into-fedora-and-a-triple-store">Getting Metadata into Fedora and a Triple-store</h3><p>The above sections described how Drupal manages and stores metadata, but Islandora 8 provides for pushing that metadata into a Fedora 4+ repository and a triple-store. Islandora does this by using Drupal’s serialization capabilities to provide a JSON-LD serialization that can be ingested by Fedora 4+ repository and triple-stores. In response to actions taken as a result of if-then configurations in Contexts, Islandora sends notifications to the repository and triple-store that an entity available to ingest.</p><p>The JSON-LD module (written for Islandora) takes an entity and its corresponding RDF mapping (a structure defined by the contributed RDF module) to create a JSON-LD serialization. An RDF mapping for a content type, media type, or vocabulary lists its fields and the RDF predicates that should be used for them.</p><p>The JSON-LD serialization for an entity is available by appending ?_format=jsonld to the entity’s URL. This particular syntax takes advantage of the REST API module. Below is an example JSONLD document representing the RDF serialization of a Repository item node created in a standard islandora-playbook based vagrant VM:</p><pre><code class="language-json">{
  &quot;@graph&quot;:[
    {
      &quot;@id&quot;:&quot;http://localhost:8000/node/1&quot;,
      &quot;@type&quot;:[
        &quot;http://pcdm.org/models#Object&quot;
      ],
      &quot;http://purl.org/dc/terms/title&quot;:[
        {
          &quot;@value&quot;:&quot;New York, New York. A large lobster brought in by the New England fishing boat [Fulton Fish Market]&quot;,
          &quot;@language&quot;:&quot;en&quot;
        }
      ],
      &quot;http://schema.org/author&quot;:[
        {
          &quot;@id&quot;:&quot;http://localhost:8000/user/1&quot;
        }
      ],
      &quot;http://schema.org/dateCreated&quot;:[
        {
          &quot;@value&quot;:&quot;2019-03-14T19:05:24+00:00&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;
        }
      ],
      &quot;http://schema.org/dateModified&quot;:[
        {
          &quot;@value&quot;:&quot;2019-03-14T19:20:51+00:00&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/date&quot;:[
        {
          &quot;@value&quot;:&quot;1943-05&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#string&quot;
        },
        {
          &quot;@value&quot;:&quot;1943-05&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#gYearMonth&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/extent&quot;:[
        {
          &quot;@value&quot;:&quot;1 negative&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#string&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/identifier&quot;:[
        {
          &quot;@value&quot;:&quot;D 630714&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#string&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/type&quot;:[
        {
          &quot;@id&quot;:&quot;http://localhost:8000/taxonomy/term/11&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/rights&quot;:[
        {
          &quot;@value&quot;:&quot;No known restrictions. For information, see U.S. Farm Security Administration/Office of War Information Black &amp; White Photographs(http://www.loc.gov/rr/print/res/071_fsab.html)&quot;,
          &quot;@type&quot;:&quot;http://www.w3.org/2001/XMLSchema#string&quot;
        }
      ],
      &quot;http://purl.org/dc/terms/subject&quot;:[
        {
          &quot;@id&quot;:&quot;http://localhost:8000/taxonomy/term/26&quot;
        }
      ],
      &quot;http://schema.org/sameAs&quot;:[
        {
          &quot;@value&quot;:&quot;http://localhost:8000/node/1&quot;
        }
      ]
    },
    {
      &quot;@id&quot;:&quot;http://localhost:8000/user/1&quot;,
      &quot;@type&quot;:[
        &quot;http://schema.org/Person&quot;
      ]
    },
    {
      &quot;@id&quot;:&quot;http://localhost:8000/taxonomy/term/11&quot;,
      &quot;@type&quot;:[
        &quot;http://schema.org/Thing&quot;
      ]
    },
    {
      &quot;@id&quot;:&quot;http://localhost:8000/taxonomy/term/26&quot;,
      &quot;@type&quot;:[
        &quot;http://schema.org/Thing&quot;
      ]
    }
  ]
}</code></pre><h3 id="maintaining-uri-reference--relationships">Maintaining URI reference &amp; relationships</h3><p>Migrating the URI associated with a person, place, event, etc. is an essential requirement for UTK. This process will demonstrate how to retain the URIs we have when we migrate and support complex graph relationships. To take full advantage of this, the taxonomy vocabularies (person, geographic location, subject, event, etc.) needs to be migrated or created first. Once the taxonomy term is migrated, the relationship needs to be specified on the node along with the previously created taxonomy reference URI. <strong>Islandora Defaults</strong> provides a ‘Linked Agent’ field as part of the Repository Item content type, and populates the available relationships from the MARC relators list. By utilizing this, the Entity (for example in this illustration is the person term <strong>Van Vactor</strong>) and his MARC relator is <strong>Composer</strong>.</p><figure class="post__image"><img loading="lazy" src="https://user-images.githubusercontent.com/2738244/86975470-62579580-c146-11ea-8f20-ddc6b53edebe.png" data-is-external-image="true" alt="vanvactor_example"></figure><p></p><p>The list of available relations for this field is configurable at ‘/admin/structure/types/manage/islandora_object/fields/node.islandora_object.field_linked_agent’. If you re-use this existing field on another content type, you can define different available relations for that instance of the field. Relations are defined in the format key|value, and the key is used in the RDF mapping (see below).</p><p></p><figure class="post__image"><img loading="lazy" src="https://islandora.github.io/documentation/assets/metadata_available_relations_config.png" data-is-external-image="true" alt="key|value RDF mapping"></figure><p></p><p>Unlike other fields, which can be assigned RDF predicates in RDF Mapping yaml files, a typed relation field uses a different predicate depending on the chosen “type”. These predicates are assigned using the ‘keys’ in the key|value configuration. The key must be formated namespace:predicate, e.g. relators:act. The namespace (‘relators’) must be pre-defined in code, using a hook. See the RDF Mapping section of Create / Update a Content Type for more details, including a list of available pre-defined namespaces.</p><p>For more information see <a href="/metadata-and-metadata-sharing#Typed-Relation">Metadata and Metadata Sharing #Typed-Relation</a> and <a href="https://islandora.github.io/documentation/user-documentation/metadata/">Islandora’s Metadata Documentation</a></p><h3 id="single-objects-using-the-ui">Single Objects (using the UI)</h3><p>Before you start ingesting identify all of the entities (taxonomy vocabulary term reference) that needs to be created first (person, events, geographic locations, subjects, etc.) if it doesn’t already exist. You can create them in paralelle while filling out the ingest form. To create a new term go the the category it falls into (person, events, geographic locations, subjects, etc.) and click “List Terms” then “Add Term”.</p><pre><code class="language-json">{
  &quot;@graph&quot;: [{
    &quot;@id&quot;: &quot;http://www.utkislandora8testing.com/taxonomy/term/34&quot;,
    &quot;@type&quot;: [
      &quot;http://purl.org/dc/terms/Location&quot;,
      &quot;http://schema.org/Place&quot;
    ],
    &quot;http://schema.org/name&quot;: [{
      &quot;@value&quot;: &quot;Great Smoky Mountains&quot;,
      &quot;@language&quot;: &quot;en&quot;
    }],
    &quot;http://schema.org/dateModified&quot;: [{
      &quot;@value&quot;: &quot;2020-07-06T20:02:57+00:00&quot;,
      &quot;@type&quot;: &quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;
    }],
    &quot;http://schema.org/sameAs&quot;: [{
      &quot;@id&quot;: &quot;http://sws.geonames.org/4626066&quot;
    }]
  }]
}</code></pre><footer><div class="post__footer"><dl class="post__tag"><dt>Tags:</dt><dd><a href="https://donrichards.github.io/migrate_islandora_csv/batch/" title="batch">batch</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/csv/" title="CSV">CSV</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/date/" title="date">date</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/edtf/" title="EDTF">EDTF</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/etl/" title="ETL">ETL</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/fedora/" title="fedora">fedora</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/ingest/" title="ingest">ingest</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/metadata/" title="metadata">metadata</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/migrate/" title="migrate">migrate</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/migration/" title="migration">migration</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/time/" title="time">time</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/triple/" title="triple">triple</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/ui/" title="UI">UI</a></dd><dd><a href="https://donrichards.github.io/migrate_islandora_csv/yml/" title="yml">yml</a></dd></dl></div><nav><ul class="post__nav"><li class="post__nav-prev">Prev: <a href="https://donrichards.github.io/migrate_islandora_csv/uploading.html" rel="prev" title="Uploading">Uploading</a></li><li class="post__nav-next">Next: <a href="https://donrichards.github.io/migrate_islandora_csv/mods-to-rdf.html" rel="next" title="MODS to RDF">MODS to RDF</a></li></ul></nav></footer></div></article></div></div></main><footer class="footer"><div><a class="footer__logo" href="https://donrichards.github.io/migrate_islandora_csv/">Next Generation Digital Repository Solution</a></div><div><div class="footer__copy">For more information <a href="https://islandora.github.io/documentation/"></a></div><div class="footer__social"></div></div></footer><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true
   };</script><script defer="defer" src="https://donrichards.github.io/migrate_islandora_csv/assets/js/scripts.min.js?v=fe8e4c5e655cb81dbff1ee359a0b8f92"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://donrichards.github.io/migrate_islandora_csv/assets/js/prism.js?v=277309e26a038bf312a7e8aa239cfbd8"></script><script defer="defer" src="https://donrichards.github.io/migrate_islandora_csv/assets/js/prism-line-numbers.min.js?v=13275d3ac10d7028cf6a6f5da276f68c"></script><script defer="defer" src="https://donrichards.github.io/migrate_islandora_csv/assets/js/prism-copy-to-clipboard.min.js?v=fabfc3fd9af83cda5208ba2e9f9ed238"></script><script src="https://donrichards.github.io/migrate_islandora_csv/assets/js/docsearch.min.js?v=9db7c9eaa8e736ce16840e5bbc02047b"></script><script>docsearch({
                        apiKey: '2e185d125fc3636674585c446905cd8e',
                        indexName: 'donrichards_migrate_islandora_csv',
                        inputSelector: '#docsearch-input',
                        debug: false
                });</script><script defer="defer" src="https://donrichards.github.io/migrate_islandora_csv/assets/js/quicklink.umd.js?v=61daff262ce6be0813e6b1b0341274d4"></script><script>window.addEventListener('load', () =>{
         quicklink();
      });</script></body></html>